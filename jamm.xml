<tool id="jamm" name="JAMM" version="1.0.6.3">
<description>Calls peaks on NGS data</description>
<requirements>
	<requirement>R</requirement>
	<requirement>perl</requirement>
</requirements>
<command interpreter="python">
jammwrapper.py -i
	#for $x in $replicate
	${x.input.file_name}
	#end for
	-g ${genomeSizeFile}
	-z $output
	-m $mode
	-r $resolution
	-p $processes
</command>

<stdio>
<!-- Wrapper ensures anything other than zero is an error -->
<exit_code range="1:" />
<exit_code range=":-1" />
</stdio>

<inputs>
	<repeat name="replicate" title="Replicate">
		<param name="input" type="data" format="bed">
		</param>
	</repeat>
	<param name="genomeSizeFile" type="data" label="File indicating chromosome sizes" description="Chromosome size">
	</param>
	<param name="mode" type="select" label="Mode (normal or narrow)">
     <option value="normal">normal</option>
     <option value="narrow">narrow</option>
    </param>
	<param name="resolution" type="select" label="Resolution (peak or region)">
     <option value="peak">peak</option>
     <option value="region">region</option>
    </param>
         
    <param name="processes"  type="text" value="4" optional="true" help="Number of threads used by R" /> 
</inputs>

<outputs>
<data name="output" format="tabular" label="Narrowpeak tabular" />
</outputs>

<tests>
 <test>
  <param name="input" value="test1.bed" ftype="bed"/>
  <param name="input" value="test2.bed" ftype="bed"/>
  <param name="genomeSizeFile" value="chrSizes21.csize"/>
  <output name="output" ftype="tabular">
    <assert_contents>
      <has_text text="chr21" />
    </assert_contents>
  </output>
 </test>
</tests>

<citations>
    <!-- Example of annotating a citation using a DOI. -->
    <citation type="doi">10.1093/bioinformatics/btu568</citation>
</citations>    
<help>
.. class:: infomark

This tool requires files in *bed* format.

----

**What it does**
JAMM calls peaks on NGS data, i.e. for finding binding sites.
</help>
</tool>
